(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{174:function(e,t,r){"use strict";r.r(t);var a=r(1),s=r.n(a);function n(e,t,r,a,s,n,o){try{var i=e[n](o),l=i.value}catch(e){return void r(e)}i.done?t(l):Promise.resolve(l).then(a,s)}function o(e){return function(){var t=this,r=arguments;return new Promise((function(a,s){var o=e.apply(t,r);function i(e){n(o,a,s,i,l,"next",e)}function l(e){n(o,a,s,i,l,"throw",e)}i(void 0)}))}}var i={data:function(){return{icon:"mdi-tag",resource:"setting/supplies",title:"Insumos",titleForm:"Insumo",dialog:!1,loading:!1,saving:!1,filter:{search:null},form:new Form({id:null,name:null,unit_type:null,supply_type_id:null,net_weight:0,grams:0,nutrients:[]}),headers:[{text:"ID",value:"id"},{text:"Nomnbre",value:"name"},{text:"Unidad",value:"unit_type_text"},{text:"Tipo",value:"supply_type_descrip"},{text:"Accion",value:"action",sortable:!1}],nutrientHeaders:[{text:"Nutriente",value:"label"},{text:"Valor",value:"value",width:100}],dataItems:{meta:{},data:[]},meta:{supply_types:[],unit_types:[],nutrient_columns:[]}}},computed:{},mounted:function(){this.getMeta(),this.getItems()},methods:{openForm:function(){var e=arguments,t=this;return o(s.a.mark((function r(){var a,n,o;return s.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(a=e.length>0&&void 0!==e[0]?e[0]:null,t.form.clear(),t.form.reset(),null===a){r.next=18;break}return r.prev=4,r.next=7,t.form.get("/".concat(t.resource,"/").concat(a.id));case 7:n=r.sent,o=n.data,t.form.fill(o),r.next=16;break;case 12:return r.prev=12,r.t0=r.catch(4),t.$toast(r.t0.message,"danger"),r.abrupt("return");case 16:r.next=19;break;case 18:t.form.nutrients=t.meta.nutrient_columns.map((function(e){return{label:e.label,column:e.column,value:0}}));case 19:t.dialog=!0;case 20:case"end":return r.stop()}}),r,null,[[4,12]])})))()},closeForm:function(){this.dialog=!1},getMeta:function(){var e=this;return o(s.a.mark((function t(){var r,a,n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r={service:"get-meta-crud-supplies"},t.next=4,e.form.get("/common",{params:r});case 4:a=t.sent,n=a.data,e.meta=n,t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),e.$toast(t.t0.message,"danger");case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()},getItems:function(){var e=arguments,t=this;return o(s.a.mark((function r(){var a,n,o,i;return s.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a=e.length>0&&void 0!==e[0]?e[0]:1,r.prev=1,n={page:a,search:t.filter.search},t.loading=!0,r.next=6,t.form.get("/".concat(t.resource),{params:n});case 6:o=r.sent,i=o.data,t.dataItems=i,r.next=14;break;case 11:r.prev=11,r.t0=r.catch(1),t.$toast(r.t0.message,"danger");case 14:return r.prev=14,t.loading=!1,r.finish(14);case 17:case"end":return r.stop()}}),r,null,[[1,11,14,17]])})))()},submit:function(){var e=arguments,t=this;return o(s.a.mark((function r(){var a,n,o,i;return s.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(a=e.length>0&&void 0!==e[0]?e[0]:"create",r.prev=1,t.form.clear(),t.saving=!0,n=t.dataItems.data.findIndex((function(e){return e.id===t.form.id})),"delete"!==a||confirm("Â¿Realmente desea eliminar el registro?")){r.next=8;break}return t.dialog=!1,r.abrupt("return");case 8:return r.next=10,t.form.req("/".concat(t.resource),a);case 10:o=r.sent,i=o.data,"create"===a&&(t.filter.search=null,t.getItems()),"edit"===a&&(t.dataItems.data.splice(n,1,i),t.$toast("registro actualizado!","success")),"delete"===a&&(t.filter.search=null,t.getItems()),t.dialog=!1,r.next=21;break;case 18:r.prev=18,r.t0=r.catch(1),t.$toast(r.t0.message,"danger");case 21:return r.prev=21,t.saving=!1,r.finish(21);case 24:case"end":return r.stop()}}),r,null,[[1,18,21,24]])})))()}}},l=r(2),c=Object(l.a)(i,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("v-dialog",{attrs:{scrollable:"",persistent:"","max-width":"500px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[r("v-card",[r("v-card-title",[r("span",{staticClass:"headline"},[r("v-icon",{attrs:{left:""}},[e._v(e._s(e.icon))]),e._v("\n                    "+e._s(e.titleForm)+"\n                ")],1)]),e._v(" "),r("v-divider"),e._v(" "),r("v-card-text",{staticClass:"pt-5"},[r("v-row",[r("v-col",{attrs:{cols:"12",sm:"12"}},[r("v-select",{attrs:{dense:"",outlined:"",items:e.meta.supply_types,label:"Tipo de Insumo*","item-value":"id","item-text":"descrip","hide-details":"auto",error:e.form.errors.has("supply_type_id"),"error-messages":e.form.errors.get("supply_type_id")},model:{value:e.form.supply_type_id,callback:function(t){e.$set(e.form,"supply_type_id",t)},expression:"form.supply_type_id"}})],1),e._v(" "),r("v-col",{attrs:{cols:"12",sm:"12"}},[r("v-text-field",{attrs:{outlined:"",dense:"",label:"Nombre*","hide-details":"auto",error:e.form.errors.has("name"),"error-messages":e.form.errors.get("name")},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),r("v-col",{attrs:{cols:"12",sm:"12"}},[r("v-select",{attrs:{dense:"",outlined:"",items:e.meta.unit_types,label:"Unidad*","item-value":"value","item-text":"text","hide-details":"auto",error:e.form.errors.has("unit_type"),"error-messages":e.form.errors.get("unit_type")},model:{value:e.form.unit_type,callback:function(t){e.$set(e.form,"unit_type",t)},expression:"form.unit_type"}})],1),e._v(" "),r("v-col",{attrs:{cols:"12",sm:"6"}},[r("v-text-field",{attrs:{outlined:"",dense:"",label:"Peso*","hide-details":"auto",error:e.form.errors.has("net_weight"),"error-messages":e.form.errors.get("net_weight")},model:{value:e.form.net_weight,callback:function(t){e.$set(e.form,"net_weight",t)},expression:"form.net_weight"}})],1),e._v(" "),r("v-col",{attrs:{cols:"12",sm:"6"}},[r("v-text-field",{attrs:{outlined:"",dense:"",label:"Gramos*","hide-details":"auto",error:e.form.errors.has("grams"),"error-messages":e.form.errors.get("grams")},model:{value:e.form.grams,callback:function(t){e.$set(e.form,"grams",t)},expression:"form.grams"}})],1),e._v(" "),r("v-col",{attrs:{cols:"12",sm:"12"}},[r("v-data-table",{staticClass:"elevation-1",attrs:{dense:"",headers:e.nutrientHeaders,items:e.form.nutrients,"item-key":"id","disable-sort":"","disable-pagination":"","hide-default-footer":""},scopedSlots:e._u([{key:"item.value",fn:function(t){var a=t.item;return[r("v-text-field",{attrs:{dense:"",type:"number",min:"0","hide-details":"auto",error:e.form.errors.has("nutrients."+a.column+".value"),"error-messages":e.form.errors.get("nutrients."+a.column+".value")},model:{value:a.value,callback:function(t){e.$set(a,"value",t)},expression:"item.value"}})]}}],null,!0)})],1)],1),e._v(" "),r("small",[e._v("*Campos requeridos")])],1),e._v(" "),r("v-divider"),e._v(" "),r("v-card-actions",[r("v-spacer"),e._v(" "),r("v-btn",{attrs:{text:"",disabled:e.saving},on:{click:e.closeForm}},[e._v("close")]),e._v(" "),e.form.id?e._e():r("v-btn",{attrs:{text:"",color:"primary",disabled:e.saving},on:{click:function(t){return e.submit("create")}}},[e._v("Crear")]),e._v(" "),e.form.id?r("v-btn",{attrs:{text:"",color:"error",disabled:e.saving},on:{click:function(t){return e.submit("delete")}}},[e._v("Eliminar")]):e._e(),e._v(" "),e.form.id?r("v-btn",{attrs:{text:"",color:"success",disabled:e.saving},on:{click:function(t){return e.submit("edit")}}},[e._v("Editar")]):e._e()],1)],1)],1),e._v(" "),r("v-card",[r("v-card-title",[r("v-icon",{attrs:{left:""}},[e._v(e._s(e.icon))]),e._v("\n            "+e._s(e.title)+"\n            "),r("v-btn",{staticClass:"ml-3",attrs:{"x-small":"",fab:"",elevation:"1",color:"primary"},on:{click:function(t){return e.openForm()}}},[r("v-icon",[e._v("mdi-plus")])],1),e._v(" "),r("v-spacer"),e._v(" "),r("v-text-field",{attrs:{dense:"",type:"search","append-icon":"mdi-magnify",label:"Buscar","single-line":"","hide-details":""},on:{search:e.getItems},model:{value:e.filter.search,callback:function(t){e.$set(e.filter,"search",t)},expression:"filter.search"}})],1),e._v(" "),r("v-data-table",{attrs:{dense:"",headers:e.headers,items:e.dataItems.data,loading:e.loading,"disable-sort":"","disable-pagination":"","hide-default-footer":""},scopedSlots:e._u([{key:"item.action",fn:function(t){var a=t.item;return[r("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.openForm(a)}}},[e._v("\n                    mdi-pencil\n                ")])]}}],null,!0)}),e._v(" "),r("v-card-actions",[r("v-row",[r("v-col",{staticClass:"text-center",attrs:{cols:"12"}},[r("v-pagination",{attrs:{length:e.dataItems.meta.last_page,"total-visible":7},on:{input:e.getItems},model:{value:e.dataItems.meta.current_page,callback:function(t){e.$set(e.dataItems.meta,"current_page",t)},expression:"dataItems.meta.current_page"}})],1)],1)],1)],1)],1)}),[],!1,null,null,null);t.default=c.exports}}]);
//# sourceMappingURL=12.js.map